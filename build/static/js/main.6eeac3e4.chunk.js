(this["webpackJsonpdiplom-api-js"]=this["webpackJsonpdiplom-api-js"]||[]).push([[0],{118:function(e,t,a){},119:function(e,t,a){},121:function(e,t,a){},237:function(e,t,a){},238:function(e,t,a){},239:function(e,t,a){},240:function(e,t,a){},241:function(e,t,a){},242:function(e,t,a){},243:function(e,t,a){},244:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(29),l=a.n(r),s=a(31),c=a(80),i=a(81),u=a(89),h=a(88),m=(a(99),a(100),a(7)),p=a(10),d=a(32),A=new(a.n(d).a)({applicationId:"CxWe-Vb05mDpjLFF1V8YBgEor5sk5FiiPUFeysUrY5g",secret:"J2RjZ7yCCYZvZtPm77rm_lNzjkXlWGx9fU61Li5cfvI",callbackUrl:"http://localhost:3000/callback"}),f=A.auth.getAuthenticationUrl(["public","write_likes"]),E=function(e,t){var a=sessionStorage.getItem("token");return A.auth.setBearerToken(a),A.photos.listPhotos(e,t).then((function(e){return e.json()}))},g=(a(118),a(82)),_=a.n(g),N=function(){return o.a.createElement("div",{className:"dropdown"},o.a.createElement("button",{className:"menu2"},o.a.createElement("img",{src:_.a,alt:"",title:"",className:"menu3"})),o.a.createElement("div",{className:"dropdown-content"},o.a.createElement("a",{href:"/"},"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"),o.a.createElement("a",{href:"https://unsplash.com/"},"Unsplash"),o.a.createElement("a",{href:"http://duminslav.ru/"},"\u041f\u043e\u0440\u0442\u0444\u043e\u043b\u0438\u043e")))},k=(a(119),function(e){var t=e.handlerInputsValue,a=e.searchQwery,n=e.loadSearchPhotos,r=e.handlerClickSearch;return o.a.createElement("div",{className:"poisk2"},o.a.createElement("input",{onChange:function(e){return t(e.target.value,e.target.id)},id:"search",type:"text",className:"poisk",placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0442\u0435\u043c\u0435","aria-label":"Search","aria-describedby":"button-search"}),o.a.createElement(m.b,{to:"/search-result/"},o.a.createElement("div",{className:"lupa",onClick:function(){var e=document.getElementById("search");""!==e.value&&(r(),n(a),e.value="")}})))}),O=(a(121),a(84)),C=a.n(O),v=function(e){var t=e.loadProfileUser,a=e.loadSearchPhotos,n=e.goLogIn,r=e.goLogOut,l=e.profileFromApp,s=e.setAccessToken,c=e.searchQwery,i=e.handlerInputsValue,u=e.handlerClickSearch,h=null,p=null;return"undefined"!==sessionStorage.getItem("token")&&""!==sessionStorage.getItem("token")&&sessionStorage.getItem("token")?(h=o.a.createElement("li",{onClick:function(){return r()}},o.a.createElement(m.b,{to:"/"},o.a.createElement("button",{className:"logOff"},o.a.createElement("i",{className:"fa fa-times","aria-hidden":"true"})))),p=0===Object.keys(l).length?o.a.createElement("li",{onClick:function(){return t()}},"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c"):0!==Object.keys(l).length?o.a.createElement("div",{className:"foto"},o.a.createElement("img",{src:l.profile_image.large,alt:"avatar"}),o.a.createElement("div",{className:"theme3"},"Welcome"," ",l.name)):o.a.createElement("div",{className:"foto"},o.a.createElement("img",{src:l.profile_image.large,alt:""}),o.a.createElement("div",{className:"theme3"},l.name))):(s(),h=o.a.createElement("li",{onClick:function(){n()}},o.a.createElement(m.b,{to:"/"},o.a.createElement("button",{className:"comeIn"},"\u0412\u043e\u0439\u0442\u0438")))),o.a.createElement("header",{className:"header"},o.a.createElement("div",{className:"header__fixed-container"},o.a.createElement("div",{className:"header__flex-container"},o.a.createElement("div",{className:"logotip"},o.a.createElement("img",{src:C.a,alt:"logo",title:"",className:"logo"}),o.a.createElement("div",{className:"logo-name"},o.a.createElement("h1",{className:"pinball"},"Moment in life"),o.a.createElement("h2",{className:"theme"},"Photo gallery"))),o.a.createElement(N,null),o.a.createElement(k,{loadSearchPhotos:a,handlerClickSearch:u,searchQwery:c,handlerInputsValue:i}),p,h)))},I=a(85),S=a.n(I),P=(a(237),function(e){var t=e.photos,a=e.getDateCreated,n=e.changeLikeStatus,r=e.loadPhotoDetails,l=null;return 0!==t.length&&(l=t.map((function(e,t){return o.a.createElement("div",{className:"photo",key:t},o.a.createElement(m.b,{to:"/photo/".concat(e.id)},o.a.createElement("img",{src:e.urls.small,className:"photo_item",alt:"",onClick:function(){return r(e.id)}})),o.a.createElement("div",{className:"photo_profile"},o.a.createElement("img",{src:e.user.profile_image.small,alt:"avatar",className:"avatar1"}),o.a.createElement("span",{className:"photo_profile-link"},o.a.createElement("a",{href:e.user.links.html},e.user.first_name))),o.a.createElement("div",{className:"photo_date"},o.a.createElement("span",null,a(e.created_at))),o.a.createElement("div",{className:"photo_like"},e.liked_by_user?o.a.createElement("button",{onClick:function(){return n(e.id,e.liked_by_user)},className:"photo_like-button like"},o.a.createElement("i",{className:"far fa-heart"}),e.likes," "):o.a.createElement("button",{onClick:function(){return n(e.id,e.liked_by_user)},className:"photo_like-button"},o.a.createElement("i",{className:"far fa-heart"}),e.likes," ")))}))),o.a.createElement("div",{className:"list_photos"},o.a.createElement(S.a,{className:"masonry"},l))}),T=(a(238),function(e){var t=e.searchQwery,a=e.funcLoadPhotos;return t?o.a.createElement("button",{className:"btn-load",onClick:function(){return a(t)}},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0435\u0449\u0435"):o.a.createElement("button",{className:"btn-load",onClick:function(){return a()}},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0435\u0449\u0435")}),b=(a(239),function(e){var t=e.storeFromApp,a=e.loadPhotoFromApp,n=e.changeLikeStatus,r=e.loadPhotoDetails,l=e.getDateCreated,s=t.photos,c=null;return 0!==s.length&&(c=o.a.createElement(P,{photos:s,getDateCreated:l,changeLikeStatus:n,loadPhotoDetails:r})),o.a.createElement("main",{className:"main"},o.a.createElement("section",{className:"skils-section"},o.a.createElement("div",{className:"skils-section__fixed-container"},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col"},c)))),o.a.createElement(T,{funcLoadPhotos:a})))}),L=(a(240),function(e){var t=e.storeFromApp,a=e.loadSearchPhotos,n=e.changeLikeStatus,r=e.loadPhotoDetails,l=e.getDateCreated,s=t.searchResult,c=null;return 0!==s.searchPhotos.length&&(c=o.a.createElement(P,{photos:s.searchPhotos,getDateCreated:l,changeLikeStatus:n,loadPhotoDetails:r})),o.a.createElement("main",{className:"main"},o.a.createElement("section",{className:"skils-section"},o.a.createElement("div",{className:"skils-section__fixed-container"},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col"},c)))),o.a.createElement(T,{searchQwery:s.qwery,funcLoadPhotos:a})))}),y=(a(241),function(e){var t=e.getDateCreated,a=e.changeLikeStatus,n=e.photoDetails,r=null;return 0!==Object.keys(n).length&&(console.log(n.id),console.log(n.liked_by_user),r=o.a.createElement("div",{className:"photo1"},o.a.createElement(m.b,{to:"/"},o.a.createElement("button",{className:"photoOff"},o.a.createElement("i",{className:"fa fa-times","aria-hidden":"true"}))),o.a.createElement("div",{className:"photo-details"},o.a.createElement("div",{className:"photo_profile"},o.a.createElement("img",{src:n.user.profile_image.small,alt:"avatar",className:"avatar2"}),o.a.createElement("span",{className:"photo_profile-link"},o.a.createElement("a",{href:n.user.links.html},n.user.first_name))),o.a.createElement("div",{className:"photo_like2"},n.liked_by_user?o.a.createElement("button",{onClick:function(){return a(n.id,n.liked_by_user)},className:"photo_like-button2"},"\u0421\u043d\u044f\u0442\u044c \u043b\u0430\u0439\u043a"):o.a.createElement("button",{onClick:function(){return a(n.id,n.liked_by_user)},className:"photo_like-button2"},"\u041f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043b\u0430\u0439\u043a")),o.a.createElement("div",{className:"photo_date2"},o.a.createElement("span",null,t(n.created_at)))),o.a.createElement("div",{className:"photo2"},o.a.createElement("img",{src:n.urls.small,alt:"photography"})))),o.a.createElement("main",{className:"main"},o.a.createElement("section",{className:"skils-section"},o.a.createElement("div",{className:"skils-section__fixed-container"},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col"},r))))))}),D=(a(242),a(243),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).loadPhotos=function(){var t=e.props,a=t.loadPhotosToApp,n=t.storeToApp,o=n.photos.length,r=n.stepLoad;a(E(o,r))},e.componentDidMount=function(){sessionStorage.getItem("token")||e.loadPhotos()},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.storeToApp,n=t.likePhotoToApp,r=t.disLikePhotoToApp,l=t.loadProfileToApp,s=t.loadPhotoDetailsToApp,c=t.logOutToApp,i=t.logInToApp,u=t.selectValueSortToApp,h=t.handlerInputsValueToApp,E=t.handlerClickSearchToApp,g=t.loadSearchPhotosToApp,_=a.profileUser,N=a.photoDetails,k=a.stepLoad,O=a.searchResult,C=a.searchQwery,I=a.error,S=function(e){var t=e.split("T"),a=t[1].split("-");return t[0]+", "+a[0]},P=function(e,t){"undefined"!==sessionStorage.getItem("token")&&""!==sessionStorage.getItem("token")&&sessionStorage.getItem("token")?!1===t?(!function(e,t){A.auth.setBearerToken(t),A.photos.likePhoto(e).then(d.toJson).then((function(e){}))}(e,sessionStorage.getItem("token")),n(e,t)):(!function(e,t){A.auth.setBearerToken(t),A.photos.unlikePhoto(e).then(d.toJson).then((function(e){}))}(e,sessionStorage.getItem("token")),r(e,t)):alert("\u0427\u0442\u043e\u0431\u044b \u043f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043b\u0430\u0439\u043a \u0432\u043e\u0439\u0434\u0438\u0442\u0435 \u0432 \u0441\u0432\u043e\u0439 \u043f\u0440\u043e\u0444\u0438\u043b\u044c")},T=function(e){var t=function(e,t,a){return A.search.photos(e,t,a).then((function(e){return e.json()}))}(e,O.searchPhotos.length,k);g(t,e)},D=function(e){var t=function(e){return A.photos.getPhoto(e).then((function(e){return e.json()}))}(e);s(t)};return console.log(I),o.a.createElement(m.a,null,o.a.createElement(v,{setAccessToken:function(){var e=window.location.search.split("code=")[1];e&&(sessionStorage.setItem("token",e),function(e){A.auth.userAuthentication(e).then((function(e){return e.json()})).then((function(e){sessionStorage.setItem("token",e.access_token)}))}(e),i())},profileFromApp:_,searchQwery:C,goLogIn:function(){window.location.assign(f)},goLogOut:function(){sessionStorage.clear("token"),c()},loadProfileUser:function(){var e=function(){var e=sessionStorage.getItem("token");return A.auth.setBearerToken(e),A.currentUser.profile().then((function(e){return e.json()}))}();l(e)},selectValueSort:u,handlerInputsValue:h,handlerClickSearch:E,loadSearchPhotos:T,loadPhotoFromApp:this.loadPhotos}),o.a.createElement(p.d,null,o.a.createElement(p.b,{path:"/search-result/",render:function(){return o.a.createElement(L,{storeFromApp:a,loadSearchPhotos:T,handlerClickSearch:E,loadPhotoDetails:D,getDateCreated:S,changeLikeStatus:P})}}),o.a.createElement(p.b,{exact:!0,path:"/photo/:id",render:function(){return o.a.createElement(y,{photoDetails:N,getDateCreated:S,changeLikeStatus:P})}}),o.a.createElement(p.b,{path:"/",render:function(){return o.a.createElement(b,{storeFromApp:a,loadPhotoFromApp:e.loadPhotos,loadPhotoDetails:D,getDateCreated:S,changeLikeStatus:P})}}),o.a.createElement(p.a,{to:"/"})))}}]),a}(o.a.Component)),U=Object(s.b)((function(e){return{storeToApp:e}}),(function(e){return{loadPhotosToApp:function(t){e(function(e){return function(t){e.then((function(e){t({type:"LOAD_PHOTOS_SUCCESS_ACTION",result:e,name:"listPhotos"})})).catch((function(e){t({type:"LOAD_FAILURE_ACTION",payload:e})}))}}(t))},likePhotoToApp:function(t,a){e(function(e,t){return{type:"LIKE_PHOTO_ACTION",id:e,status:t}}(t,a))},disLikePhotoToApp:function(t,a){e(function(e,t){return{type:"DISLIKE_PHOTO_ACTION",id:e,status:t}}(t,a))},loadProfileToApp:function(t){return e(function(e){return function(t){e.then((function(e){t({type:"LOAD_PROFILE_SUCCESS_ACTION",result:e})})).catch((function(e){t({type:"LOAD_FAILURE_ACTION",payload:e})}))}}(t))},loadPhotoDetailsToApp:function(t){return e(function(e){return function(t){e.then((function(e){t({type:"LOAD_DETAILS_SUCCESS_ACTION",result:e})})).catch((function(e){t({type:"LOAD_FAILURE_ACTION",payload:e})}))}}(t))},loadSearchPhotosToApp:function(t,a){return e(function(e,t){return function(a){e.then((function(e){a({type:"LOAD_SEARCH_PHOTOS_ACTION",result:e.results,total:e.total,pages:e.total_pages,qwery:t,name:"searchPhotos"})})).catch((function(e){a({type:"LOAD_FAILURE_ACTION",payload:e})}))}}(t,a))},logOutToApp:function(){return e({type:"LOG_OUT_ACTION"})},logInToApp:function(){return e({type:"LOG_IN_ACTION"})},handlerInputsValueToApp:function(t,a){return e(function(e,t){return{type:"HANDLER_INPUTS_VALUE_ACTION",value:e,id:t}}(t,a))},handlerClickSearchToApp:function(){return e({type:"HANDLER_CLICK_SEARCH_ACTION"})}}}))(D),j=a(20),w=a(3),R={photos:[],stepLoad:10,photosPhotographer:[],searchResult:{searchPhotos:[]},profileUser:{},profilePhotographer:{},photoDetails:{},searchQwery:"",loading:!1,loaded:!1,error:null},F=function(e,t,a){var n=e.profileUser;for(var o in n)o===t&&(n[o]=a);return n},B=function(e,t,a){return("photosPhotographer"===a?e.photosPhotographer.slice():"searchPhotos"===a?e.searchResult.searchPhotos.slice():e.photos.slice()).concat(t)},H=function(e,t,a){var n=e.photos.slice(),o=n.findIndex((function(e){return e.id===t}));return n[o].liked_by_user=!a,a?n[o].likes-=1:n[o].likes+=1,n},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_REQUESTED_ACTION":return Object(w.a)({},e,{loading:!0,loaded:!1});case"LOAD_FAILURE_ACTION":return Object(w.a)({},e,{loading:!1,loaded:!0,error:t.payload});case"LOAD_PHOTOS_SUCCESS_ACTION":return Object(w.a)({},e,{photos:B(e,t.result,t.name),loading:!1,loaded:!0,error:null});case"LOAD_SEARCH_PHOTOS_ACTION":return Object(w.a)({},e,{searchResult:{searchPhotos:B(e,t.result,t.name),totalPhotos:t.total,pages:t.pages,qwery:t.qwery},searchQwery:"",loading:!1,loaded:!0,error:null});case"LOAD_PROFILE_SUCCESS_ACTION":return Object(w.a)({},e,{profileUser:t.result,loading:!1,loaded:!0,error:null});case"LOAD_DETAILS_SUCCESS_ACTION":return Object(w.a)({},e,{photoDetails:t.result,loading:!1,loaded:!0,error:null});case"LIKE_PHOTO_ACTION":case"DISLIKE_PHOTO_ACTION":return Object(w.a)({},e,{photos:H(e,t.id,t.status)});case"LOG_OUT_ACTION":case"LOG_IN_ACTION":return Object(w.a)({},e);case"HANDLER_INPUTS_VALUE_ACTION":return"search"===t.id?Object(w.a)({},e,{searchQwery:t.value}):Object(w.a)({},e,{profileUser:F(e,t.id,t.value)});case"HANDLER_CLICK_SEARCH_ACTION":return Object(w.a)({},e,{searchResult:{searchPhotos:[],totalPhotos:0,pages:0,qwery:""}});default:return e}},x=a(86),G=a.n(x),V=a(87),Y=Object(j.c)(Q,Object(j.a)(V.a,G.a));l.a.render(o.a.createElement(s.a,{store:Y},o.a.createElement(U,null)),document.getElementById("root"))},82:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAARCAYAAADDjbwNAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABlSURBVDhP7dLBDQAhCERRpAW0/47UPtAa2IyhApO5mH0Xwulfpsw5w92FqbUmyo4AGooaGxolIvLl0rx074XKGCPWWvly1FpF2RFA45/3tQfn3XuPvXe+HGfe7AiceZtZvjxmJh/2qiti/Vs9mAAAAABJRU5ErkJggg=="},84:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAtCAYAAAC53tuhAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACUSURBVFhHY/z//z8DMeBFURJRCiX65jFCmXgBE5SmOxi1mG5g1GK6gQGzmOgChFjwc6Y7UQaOxjHdwKjFdAMjz2JwAVLWP5moTN9VmEtU64IYMBrHdAOjFtMNjDyLiW6BeG49T5TC7d6Go10YrGDUYrqBUYvpBhh/zHAjqmBgT99JtdYHCIzGMd3AqMV0AyPNYgYGAPYUHx9WI9OCAAAAAElFTkSuQmCC"},90:function(e,t,a){e.exports=a(244)}},[[90,1,2]]]);
//# sourceMappingURL=main.6eeac3e4.chunk.js.map